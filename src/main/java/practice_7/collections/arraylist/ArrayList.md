# –†–∞–∑–±–æ—Ä `ArrayList` –≤ Java

## üìå –í–≤–µ–¥–µ–Ω–∏–µ
`ArrayList` ‚Äî —ç—Ç–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –º–∞—Å—Å–∏–≤ –≤ Java, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–º–µ–Ω—è–µ—Ç —Ä–∞–∑–º–µ—Ä –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤. –û–Ω —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
- `List` ‚Äî –±–∞–∑–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å–ø–∏—Å–∫–∞–º–∏.
- `RandomAccess` ‚Äî —É–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –¥–æ—Å—Ç—É–ø –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º `O(1)`.
- `Cloneable` ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ.
- `Serializable` ‚Äî –º–æ–∂–Ω–æ —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å.

## üîπ –û—Å–Ω–æ–≤–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ `ArrayList`
- **–û—Å–Ω–æ–≤–∞–Ω –Ω–∞ –º–∞—Å—Å–∏–≤–µ** (`Object[] elementData`).
- **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞** (—É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –≤ 1.5 —Ä–∞–∑–∞ –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏).
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**:
  - –î–æ—Å—Ç—É–ø –ø–æ –∏–Ω–¥–µ–∫—Å—É `O(1)`.
  - –í—Å—Ç–∞–≤–∫–∞ –≤ –∫–æ–Ω–µ—Ü `O(1)`, –µ—Å–ª–∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ.
  - –í—Å—Ç–∞–≤–∫–∞/—É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ —Å–µ—Ä–µ–¥–∏–Ω—ã `O(n)`, —Ç–∞–∫ –∫–∞–∫ —Ç—Ä–µ–±—É–µ—Ç —Å–¥–≤–∏–≥–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
- **–ù–µ –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π** (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –∏—Å–ø–æ–ª—å–∑—É–π `Collections.synchronizedList()` –∏–ª–∏ `CopyOnWriteArrayList`).

---

## üîπ –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ `ArrayList`
### 1Ô∏è‚É£ **–í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**
```java
transient Object[] elementData;
```
- –≠—Ç–æ –º–∞—Å—Å–∏–≤, –≤ –∫–æ—Ç–æ—Ä–æ–º —Ö—Ä–∞–Ω—è—Ç—Å—è –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å–ø–∏—Å–∫–∞.
- –í JDK 9+ –ø—É—Å—Ç—ã–µ `ArrayList` –∏—Å–ø–æ–ª—å–∑—É—é—Ç `DEFAULTCAPACITY_EMPTY_ELEMENTDATA` –¥–æ –ø–µ—Ä–≤–æ–≥–æ `add()`.

### 2Ô∏è‚É£ **–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã**
```java
public ArrayList() {
    this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;
}
```
- `new ArrayList<>()` —Å–æ–∑–¥–∞—ë—Ç —Å–ø–∏—Å–æ–∫ —Å –ø—É—Å—Ç—ã–º –º–∞—Å—Å–∏–≤–æ–º.
- `new ArrayList<>(initialCapacity)` —Å—Ä–∞–∑—É –≤—ã–¥–µ–ª—è–µ—Ç –º–∞—Å—Å–∏–≤ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞.
- `new ArrayList<>(Collection<? extends E> c)` –∫–æ–ø–∏—Ä—É–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏.

### 3Ô∏è‚É£ **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞**
```java
public boolean add(E e) {
    ensureCapacityInternal(size + 1);
    elementData[size++] = e;
    return true;
}
```
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ –º–µ—Å—Ç–∞ –≤ `elementData[]`.
- –ï—Å–ª–∏ –º–∞—Å—Å–∏–≤ –ø–æ–ª–æ–Ω, –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `grow()`.

### 4Ô∏è‚É£ **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ (`grow()`)**
```java
private void grow(int minCapacity) {
    int oldCapacity = elementData.length;
    int newCapacity = oldCapacity + (oldCapacity >> 1); // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –≤ 1.5 —Ä–∞–∑–∞
    if (newCapacity < minCapacity)
        newCapacity = minCapacity;
    elementData = Arrays.copyOf(elementData, newCapacity);
}
```
- –†–∞–∑–º–µ—Ä —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è **–≤ 1.5 —Ä–∞–∑–∞**.
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `Arrays.copyOf()`, –∫–æ—Ç–æ—Ä—ã–π –∫–æ–ø–∏—Ä—É–µ—Ç —Å—Ç–∞—Ä—ã–π –º–∞—Å—Å–∏–≤ –≤ –Ω–æ–≤—ã–π.

### 5Ô∏è‚É£ **–£–¥–∞–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞**
```java
public E remove(int index) {
    E oldValue = elementData(index);
    int numMoved = size - index - 1;
    if (numMoved > 0)
        System.arraycopy(elementData, index + 1, elementData, index, numMoved);
    elementData[--size] = null;
    return oldValue;
}
```
- –£–¥–∞–ª—è–µ—Ç —ç–ª–µ–º–µ–Ω—Ç –∏ —Å–¥–≤–∏–≥–∞–µ—Ç –æ—Å—Ç–∞–ª—å–Ω—ã–µ `System.arraycopy()`.
- –ü–æ—Å–ª–µ–¥–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç **–æ–±–Ω—É–ª—è–µ—Ç—Å—è** –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Å—Å—ã–ª–∫–∏.

### 6Ô∏è‚É£ **–û—á–∏—Å—Ç–∫–∞ —Å–ø–∏—Å–∫–∞**
```java
public void clear() {
    for (int i = 0; i < size; i++)
        elementData[i] = null;
    size = 0;
}
```
- –û–±–Ω—É–ª—è–µ—Ç –≤—Å–µ —Å—Å—ã–ª–∫–∏ –≤ –º–∞—Å—Å–∏–≤–µ (—á—Ç–æ–±—ã GC –º–æ–≥ –∏—Ö —É–±—Ä–∞—Ç—å).
- `size` –æ–±–Ω—É–ª—è–µ—Ç—Å—è.

---

## üîπ –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏
### ‚ùì **–ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω `ArrayList` –≤–Ω—É—Ç—Ä–∏?**
–û—Ç–≤–µ—Ç:
- –û—Å–Ω–æ–≤–∞–Ω –Ω–∞ –º–∞—Å—Å–∏–≤–µ `Object[] elementData`.
- –ü—Ä–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –≤ 1.5 —Ä–∞–∑–∞.
- –£–¥–∞–ª–µ–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç —Å–¥–≤–∏–≥–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ `System.arraycopy()`.

### ‚ùì **–ö–∞–∫ `ArrayList` —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä?**
–û—Ç–≤–µ—Ç:
- –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è `ensureCapacityInternal(size + 1)`.
- –ï—Å–ª–∏ –º–∞—Å—Å–∏–≤ –∑–∞–ø–æ–ª–Ω–µ–Ω, –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `grow()`, –∫–æ—Ç–æ—Ä—ã–π —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –≤ **1.5 —Ä–∞–∑–∞**.

### ‚ùì **–í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ `ArrayList` –∏ `LinkedList`?**
| –§—É–Ω–∫—Ü–∏—è        | `ArrayList`   | `LinkedList`  |
|---------------|-------------|--------------|
| –í—Å—Ç–∞–≤–∫–∞ –≤ –∫–æ–Ω–µ—Ü | `O(1)`       | `O(1)`        |
| –í—Å—Ç–∞–≤–∫–∞ –≤ —Å–µ—Ä–µ–¥–∏–Ω—É | `O(n)`       | `O(1)`, –µ—Å–ª–∏ –µ—Å—Ç—å `ListIterator` |
| –£–¥–∞–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ | `O(n)`       | `O(1)` (–µ—Å–ª–∏ –µ—Å—Ç—å —Å—Å—ã–ª–∫–∞) |
| –î–æ—Å—Ç—É–ø –ø–æ –∏–Ω–¥–µ–∫—Å—É | `O(1)`       | `O(n)` |

**–í—ã–≤–æ–¥**: `ArrayList` –±—ã—Å—Ç—Ä–µ–µ, –µ—Å–ª–∏ –Ω—É–∂–µ–Ω **—Å–ª—É—á–∞–π–Ω—ã–π –¥–æ—Å—Ç—É–ø**. `LinkedList` –ª—É—á—à–µ –¥–ª—è **–≤—Å—Ç–∞–≤–∫–∏/—É–¥–∞–ª–µ–Ω–∏—è –≤ —Å–µ—Ä–µ–¥–∏–Ω—É**.

### ‚ùì **–ü–æ—á–µ–º—É `ArrayList` –Ω–µ –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π?**
–û—Ç–≤–µ—Ç:
- `ArrayList` –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω (`add()` –∏ `remove()` –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `synchronized`).
- –ï—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤ –¥–æ–±–∞–≤–ª—è—é—Ç —ç–ª–µ–º–µ–Ω—Ç—ã, –≤–æ–∑–º–æ–∂–Ω—ã –≥–æ–Ω–∫–∏ –¥–∞–Ω–Ω—ã—Ö.

**–†–µ—à–µ–Ω–∏–µ**:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Collections.synchronizedList(new ArrayList<>())`.
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `CopyOnWriteArrayList` (—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω –ø—Ä–∏ —Ä–µ–¥–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö).

### ‚ùì **–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç, –µ—Å–ª–∏ –≤ `ArrayList` –¥–æ–±–∞–≤–∏—Ç—å `null`?**
–û—Ç–≤–µ—Ç:
- `null` —Ä–∞–∑—Ä–µ—à–µ–Ω –∫–∞–∫ –∑–Ω–∞—á–µ–Ω–∏–µ.
- `ArrayList` –Ω–µ –≤—ã–±—Ä–æ—Å–∏—Ç `NullPointerException`, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç `HashMap`.

```java
List<String> list = new ArrayList<>();
list.add(null);
System.out.println(list.get(0)); // null
```

### ‚ùì **–ö–∞–∫–æ–π –Ω–∞—á–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä `ArrayList`?**
–û—Ç–≤–µ—Ç:
- `new ArrayList<>()` —Å–æ–∑–¥–∞—ë—Ç **–ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤**.
- –ü—Ä–∏ –ø–µ—Ä–≤–æ–º `add()` —Ä–∞–∑–º–µ—Ä —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –¥–æ **10** (–≤ JDK 9+ –∂–µ—Å—Ç–∫–æ –∑–∞–¥–∞–Ω–æ `10` –≤ `calculateCapacity()`).

### ‚ùì **–ö–∞–∫ —É–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä `ArrayList` –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤?**
–û—Ç–≤–µ—Ç:
- –í—ã–∑–≤–∞—Ç—å `trimToSize()`, —á—Ç–æ–±—ã —É–º–µ–Ω—å—à–∏—Ç—å `elementData[]` –¥–æ `size`.

```java
list.trimToSize();
```
- –≠—Ç–æ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –ø–∞–º—è—Ç—å, –µ—Å–ª–∏ —Å–ø–∏—Å–æ–∫ —Ä–µ–¥–∫–æ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è.

---

## üîπ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
- `ArrayList` —É–¥–æ–±–µ–Ω –¥–ª—è **—á–∞—Å—Ç–æ–≥–æ —á—Ç–µ–Ω–∏—è –∏ —Ä–µ–¥–∫–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è**.
- –†–∞—Å—à–∏—Ä—è–µ—Ç—Å—è **–≤ 1.5 —Ä–∞–∑–∞**, —É–¥–∞–ª–µ–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç **—Å–¥–≤–∏–≥–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤**.
- –ù–µ –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–µ–Ω (–∏—Å–ø–æ–ª—å–∑—É–π `Collections.synchronizedList()`).
- –ù–∞—á–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä **10** (–µ—Å–ª–∏ `add()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤–ø–µ—Ä–≤—ã–µ).

**–ü–æ–ª–µ–∑–Ω–æ –∑–Ω–∞—Ç—å –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏**:
- –ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ.
- –í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É `ArrayList` –∏ `LinkedList`.
- –ö–∞–∫ `grow()` —Ä–∞—Å—à–∏—Ä—è–µ—Ç –º–∞—Å—Å–∏–≤.
- –ü–æ—á–µ–º—É `trimToSize()` –ø–æ–ª–µ–∑–µ–Ω.

---
**–ê–≤—Ç–æ—Ä**: Alex Pshe üöÄ
