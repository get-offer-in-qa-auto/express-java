# –†–∞–∑–±–æ—Ä `HashMap` –≤ Java

## üìå –í–≤–µ–¥–µ–Ω–∏–µ
`HashMap` ‚Äî —ç—Ç–æ **–∞—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω—ã–π –º–∞—Å—Å–∏–≤ (—Å–ª–æ–≤–∞—Ä—å, —Ö–µ—à-—Ç–∞–±–ª–∏—Ü–∞)** –≤ Java, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç **–∫–ª—é—á–∏ –∏ –∑–Ω–∞—á–µ–Ω–∏—è**. –ì–ª–∞–≤–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- **–ö–ª—é—á–∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã** (`equals()` –∏ `hashCode()` –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã).
- **–•—Ä–∞–Ω–∏—Ç –ø–∞—Ä—ã (–∫–ª—é—á, –∑–Ω–∞—á–µ–Ω–∏–µ)**.
- **–ù–µ—É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã–π** (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –≤—Å—Ç–∞–≤–∫–∏ ‚Äî `LinkedHashMap`).
- **–†–∞–∑—Ä–µ—à–∞–µ—Ç `null` –∫–∞–∫ –∫–ª—é—á –∏ –∑–Ω–∞—á–µ–Ω–∏–µ**.
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**:
  - –í—Å—Ç–∞–≤–∫–∞ `O(1)`, –Ω–æ `O(n)`, –µ—Å–ª–∏ –µ—Å—Ç—å **–∫–æ–ª–ª–∏–∑–∏–∏**.
  - –ü–æ–∏—Å–∫ `O(1)`, –Ω–æ –≤ —Ö—É–¥—à–µ–º —Å–ª—É—á–∞–µ `O(n)`.

---

## üîπ –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ `HashMap`
### 1Ô∏è‚É£ **–ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω `HashMap` –≤–Ω—É—Ç—Ä–∏?**
- **–û—Å–Ω–æ–≤–∞–Ω –Ω–∞ –º–∞—Å—Å–∏–≤–µ `Node<K, V>[] table`**.
- **–ö–ª—é—á–∏ —Ö–µ—à–∏—Ä—É—é—Ç—Å—è (`hashCode()`)** ‚Üí –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∏–Ω–¥–µ–∫—Å –≤ –º–∞—Å—Å–∏–≤–µ.
- **–ö–æ–ª–ª–∏–∑–∏–∏** —Ä–∞–∑—Ä–µ—à–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ **—Å–≤—è–∑–Ω—ã–µ —Å–ø–∏—Å–∫–∏** (–¥–æ Java 7) –∏ **–∫—Ä–∞—Å–Ω–æ-—á—ë—Ä–Ω—ã–µ –¥–µ—Ä–µ–≤—å—è (Java 8+)**.

```java
static class Node<K,V> {
    final int hash;
    final K key;
    V value;
    Node<K,V> next;
}
```
- –ö–∞–∂–¥—ã–π —É–∑–µ–ª (`Node<K, V>`) —Ö—Ä–∞–Ω–∏—Ç:
    - `hash` ‚Äî —Ö–µ—à-–∫–æ–¥ –∫–ª—é—á–∞.
    - `key` ‚Äî —Å–∞–º –∫–ª—é—á.
    - `value` ‚Äî –∑–Ω–∞—á–µ–Ω–∏–µ.
    - `next` ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —É–∑–µ–ª (–µ—Å–ª–∏ –∫–æ–ª–ª–∏–∑–∏—è).

---

## üîπ **–ß—Ç–æ —Ç–∞–∫–æ–µ –±–∞–∫–µ—Ç—ã (`buckets`) –≤ `HashMap`?**
–í `HashMap` –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ **–º–∞—Å—Å–∏–≤–µ `table[]`**, –≥–¥–µ –∫–∞–∂–¥–∞—è —è—á–µ–π–∫–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **–±–∞–∫–µ—Ç–æ–º (bucket)**.  
–ë–∞–∫–µ—Ç ‚Äî —ç—Ç–æ **—Å–≤—è–∑–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫** (`Node<K,V>`) –∏–ª–∏ **–∫—Ä–∞—Å–Ω–æ-—á—ë—Ä–Ω–æ–µ –¥–µ—Ä–µ–≤–æ (`TreeNode<K,V>`)**, –µ—Å–ª–∏ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∫–æ–ª–ª–∏–∑–∏–π.

### üìå **–ö–∞–∫ `HashMap` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∞–∫–µ—Ç—ã?**
1. **–ö–ª—é—á —Ö–µ—à–∏—Ä—É–µ—Ç—Å—è** —á–µ—Ä–µ–∑ `hashCode()`.
2. **–ü–æ —Ö–µ—à—É –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∏–Ω–¥–µ–∫—Å** –≤ –º–∞—Å—Å–∏–≤–µ (`table[]`).
3. **–≠–ª–µ–º–µ–Ω—Ç –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –Ω—É–∂–Ω—ã–π –±–∞–∫–µ—Ç**.

```java
int index = (table.length - 1) & hash;
```
- `table.length - 1` –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∏–Ω–¥–µ–∫—Å –≤—Å–µ–≥–¥–∞ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –º–∞—Å—Å–∏–≤–∞.
- `&` (–±–∏—Ç–æ–≤–æ–µ –ò) –≤–º–µ—Å—Ç–æ `%` (–¥–µ–ª–µ–Ω–∏–µ) —É—Å–∫–æ—Ä—è–µ—Ç –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ.

---

## üîπ **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –±–∞–∫–µ—Ç—ã –ø—Ä–∏ –∫–æ–ª–ª–∏–∑–∏—è—Ö?**
### 1Ô∏è‚É£ **–ï—Å–ª–∏ –¥–≤–∞ –∫–ª—é—á–∞ –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å (–∫–æ–ª–ª–∏–∑–∏—è)?**
- –í **Java 7** –∫–æ–ª–ª–∏–∑–∏–∏ —Ä–∞–∑—Ä–µ—à–∞–ª–∏—Å—å —á–µ—Ä–µ–∑ **—Å–≤—è–∑–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫**.
- –í **Java 8+**:
    - –ï—Å–ª–∏ **–∫–æ–ª–ª–∏–∑–∏–π < 8**, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **—Å–≤—è–∑–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫**.
    - –ï—Å–ª–∏ **–∫–æ–ª–ª–∏–∑–∏–π ‚â• 8**, –±–∞–∫–µ—Ç –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ **–∫—Ä–∞—Å–Ω–æ-—á—ë—Ä–Ω–æ–µ –¥–µ—Ä–µ–≤–æ** (`TreeNode<K,V>`), —É—Å–∫–æ—Ä—è—è –ø–æ–∏—Å–∫ –¥–æ `O(log n)`.

```java
if (binCount >= TREEIFY_THRESHOLD) // TREEIFY_THRESHOLD = 8
    treeifyBin(tab, hash);
```
- –ï—Å–ª–∏ –≤ –±–∞–∫–µ—Ç–µ **–º–µ–Ω—å—à–µ 8 —ç–ª–µ–º–µ–Ω—Ç–æ–≤**, –ø–æ–∏—Å–∫ –∏–¥—ë—Ç `O(n)`.
- –ï—Å–ª–∏ –≤ –±–∞–∫–µ—Ç–µ **8 –∏ –±–æ–ª–µ–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤**, –æ–Ω –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ **–∫—Ä–∞—Å–Ω–æ-—á—ë—Ä–Ω–æ–µ –¥–µ—Ä–µ–≤–æ**, –∏ –ø–æ–∏—Å–∫ `O(log n)`.

---

## üîπ –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã `HashMap`
### 1Ô∏è‚É£ **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ (`put()`)**
```java
public V put(K key, V value) {
    return putVal(hash(key), key, value, false, true);
}
```
- –í—ã—á–∏—Å–ª—è–µ—Ç `hashCode()` –∫–ª—é—á–∞.
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç **–∏–Ω–¥–µ–∫—Å –≤ `table[]`**.
- –ï—Å–ª–∏ **—è—á–µ–π–∫–∞ –ø—É—Å—Ç–∞**, —Å–æ–∑–¥–∞—ë—Ç `Node<K, V>`.
- –ï—Å–ª–∏ **–∫–æ–ª–ª–∏–∑–∏—è**, –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ **—Å–≤—è–∑–Ω—ã–π —Å–ø–∏—Å–æ–∫** –∏–ª–∏ **–¥–µ—Ä–µ–≤–æ (Java 8+)**.

### 2Ô∏è‚É£ **–ü–æ–∏—Å–∫ —ç–ª–µ–º–µ–Ω—Ç–∞ (`get()`)**
```java
public V get(Object key) {
    Node<K,V> e;
    return (e = getNode(hash(key), key)) == null ? null : e.value;
}
```
- –í—ã—á–∏—Å–ª—è–µ—Ç `hashCode()`.
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç **–∏–Ω–¥–µ–∫—Å –≤ `table[]`**.
- –ï—Å–ª–∏ **–∫–æ–ª–ª–∏–∑–∏—è**, –∏—â–µ—Ç –≤ —Ü–µ–ø–æ—á–∫–µ.

### 3Ô∏è‚É£ **–£–¥–∞–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ (`remove()`)**
```java
public V remove(Object key) {
    Node<K,V> e;
    return (e = removeNode(hash(key), key, null, false, true)) == null ? null : e.value;
}
```
- –í—ã—á–∏—Å–ª—è–µ—Ç `hashCode()`, –∏—â–µ—Ç **–∏–Ω–¥–µ–∫—Å**.
- –ï—Å–ª–∏ **–Ω–∞—à—ë–ª –∫–ª—é—á**, —É–¥–∞–ª—è–µ—Ç –µ–≥–æ.

---

## üîπ –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏
### ‚ùì **–ö–∞–∫ `HashMap` –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∫–ª—é—á–µ–π?**
–û—Ç–≤–µ—Ç:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç **`hashCode()` –∏ `equals()`**.
- –ï—Å–ª–∏ `hashCode()` —Å–æ–≤–ø–∞–¥–∞–µ—Ç, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `equals()`.
- –ï—Å–ª–∏ `equals()` –≤–µ—Ä–Ω—É–ª `true`, **–∑–∞–º–µ–Ω—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ**.

### ‚ùì **–ß—Ç–æ —Ç–∞–∫–æ–µ `loadFactor`?**
–û—Ç–≤–µ—Ç:
- **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `0.75`**.
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, **–∫–æ–≥–¥–∞ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä –º–∞—Å—Å–∏–≤–∞**.
- –ü—Ä–∏ `size > capacity * loadFactor` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `resize()`.

### ‚ùì **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ `put()` –≤ `HashMap`?**
–û—Ç–≤–µ—Ç:
1. –í—ã—á–∏—Å–ª—è–µ—Ç—Å—è `hashCode()`.
2. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∏–Ω–¥–µ–∫—Å –≤ `table[]`.
3. –ï—Å–ª–∏ **—è—á–µ–π–∫–∞ –ø—É—Å—Ç–∞**, —Å–æ–∑–¥–∞—ë—Ç—Å—è `Node<K,V>`.
4. –ï—Å–ª–∏ **–µ—Å—Ç—å –∫–æ–ª–ª–∏–∑–∏—è**, –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ **—Å–ø–∏—Å–æ–∫** –∏–ª–∏ **–¥–µ—Ä–µ–≤–æ (Java 8+)**.

### ‚ùì **–ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `null` –∫–∞–∫ –∫–ª—é—á?**
–û—Ç–≤–µ—Ç:
- **–î–∞**, `null` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.
- –û–Ω –≤—Å–µ–≥–¥–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ **–Ω—É–ª–µ–≤–æ–π —è—á–µ–π–∫–µ `table[0]`**.

```java
HashMap<String, String> map = new HashMap<>();
map.put(null, "value");
System.out.println(map.get(null)); // "value"
```

---

## üîπ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
- `HashMap` ‚Äî —ç—Ç–æ **–∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ** —Å –±—ã—Å—Ç—Ä—ã–º –¥–æ—Å—Ç—É–ø–æ–º `O(1)`.
- –û—Å–Ω–æ–≤–∞–Ω –Ω–∞ **–º–∞—Å—Å–∏–≤–µ + —Å–≤—è–∑–Ω—ã–π —Å–ø–∏—Å–æ–∫ / –¥–µ—Ä–µ–≤–æ**.
- –ö–æ–ª–ª–∏–∑–∏–∏ **Java 7 ‚Üí —Å–ø–∏—Å–æ–∫, Java 8+ ‚Üí –¥–µ—Ä–µ–≤–æ**.
- `null` **—Ä–∞–∑—Ä–µ—à—ë–Ω** –∫–∞–∫ –∫–ª—é—á –∏ –∑–Ω–∞—á–µ–Ω–∏–µ.

---
**–ê–≤—Ç–æ—Ä**: Alex Pshe üöÄ

